<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin=""></script>
</head>
<html>

<body>
    <div id="mapid" style="height: 1000px;"></div>
</body>

</html>

<script>
    let map = L.map('mapid').setMinZoom(8).setMaxZoom(8).setView([0, 0], 9);

    L.TileLayer.MyCustomLayer = L.TileLayer.extend({
        getTileUrl: function (coords) {
            console.log('avant envoi - x : ' + coords.x + " - y : " + coords.y);
            coords.x = coords.x % 360;
            if(coords.y <= 180)
                return L.TileLayer.prototype.getTileUrl.call(this, coords);
        }
    });

    L.tileLayer.myCustomLayer = function (templateUrl, options) {
        return new L.TileLayer.MyCustomLayer(templateUrl, options);
    }

    L.tileLayer.myCustomLayer('http://ripoux:4000/canvas/{z}/{x}/{y}', {
        minZoom: 8,
        maxZoom: 8,
        tms: false,
        noWrap: true,
        defaultRadius: 1,
        continuousWorld: false
    }).addTo(map);

</script>